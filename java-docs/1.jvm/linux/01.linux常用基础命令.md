### 日志相关
#### 1.nohup启动java服务，追加日志文件导致磁盘占用，建议修改为以下写法:
````shell script
nohup /usr/java/jdk1.8.0_131/bin/java -Xms2048m -Xmx2048m -XX:MetaspaceSize=1024m                                                                                   
-XX:MaxMetaspaceSize=1024m -XX:+HeapDumpOnOutOfMemoryError -XX:+UseG1GC -verbose:gc 
-Xloggc:/log/gc.log -XX:+PrintGCDetails -XX:+PrintGCDateStamps -jar xxx-example.jar 
--spring.profiles.active=prd ./program >/dev/null 2>&1 &
````
将日志文件输出到黑洞目录，不指定输出日志文件

#### 2.日志技巧
````shell script
1.查看文件,并显示行号 
less -N catalina.out

2.定位到某行（这里定位到第10行） 
less +10g catalina.out

3.根据内容过滤显示,并显示行号  
less 文件名 | grep -n 查找内容

4.输出包含匹配字符串的行数 -n，从 1 开始 
grep -n ‘hello word’  catalina.out

5.统计包含匹配字符串的总行数  
grep -c ‘hello world’ catalina.txt

6.输出包含匹配字符串的前后10行 
grep -C10 ‘hello world’ catalina.txt | less -N
`````
#### 3.less命令
|命令|解释
|----|----|
|less 文件名 |查看文件  
|less 文件名 &#124; grep -n 查找内容|根据文件过滤并显示行号
|less +行号g 文件名| 查看文件并定位到某行
|d|向下翻页
|u|向上翻页
|g|跳到首行
|G|跳到底部
|?查找内容|向上查找
|/查找内容|向下查找
|n|下一个
|N|上一个
|q|退出less命令

#### 4.find命令
````shell script
-name 按照文件名查找文件。  
-perm 按照文件权限来查找文件。  
-prune 使用这一选项可以使find命令不在当前指定的目录中查找，  
       如果同时使用-depth选项，那么-prune将被find命令忽略。
-user 按照文件属主来查找文件。  
-group 按照文件所属的组来查找文件。  
-mtime -n +n 按照文件的更改时间来查找文件，  
       - n表示文件更改时间距现在n天以内，  
       + n表示文件更改时间距现在n天以前。
       find命令还有-atime和-ctime 选项，但它们都和-m time选项。    
-nogroup 查找无有效所属组的文件，即该文件所属的组在/etc/groups中不存在。  
-nouser 查找无有效属主的文件，即该文件的属主在/etc/passwd中不存在。  
-newer file1 ! file2 查找更改时间比文件file1新但比文件file2旧的文件。
````
##### 4.1 find命令举例
````shell script
查找日志文件更改时间距现在30天以前
# find /opt -name *.log -mtime +30
查找日志文件更改时间距现在30天以前并执行删除
# find /opt -name *.log -mtime +30 -exec rm -rf {} \;
````

#### 5.curl命令
````shell script
curl -i http://url/xxx
可以查看响应头信息及返回值
````

#### 6.常用命令
````shell script
查看服务器版本
uname -a
cat /etc/os-release

服务器系统
cat /etc/issue
或者
cat /etc/redhat-release 
`````
### 进程线程相关
#### 1.查看进程相关的线程数
##### 1.使用top命令
````shell script
top -H -p {pid}
````
注意:这个时候top的每一行就不是显示一个进程，而是一个线程

##### 2.使用ps命令
具体用法是ps -xH 这样就可以查看所有存在的线程，也可以使用grep作进一步的过滤  
或者使用 ps -mq PID 这样可以看到指定的进程产生的线程数目

##### 3.使用pstree命令
````shell script
## 打印所有进程及其线程
pstree -p 
## 打印某个进程的线程数
pstree -p {pid} | wc -l
````
